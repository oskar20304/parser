# Как получить число 51,527 (Watchers) со StockTwits

## Быстрый старт

1. **Запустите приложение:**
   ```bash
   npm start
   ```

2. **Откройте веб-интерфейс:**
   Перейдите на http://localhost:3000

3. **Добавьте символ CLSK:**
   - Symbol: `CLSK`
   - CSS Selector: `watchers` (специальное ключевое слово)
   - Cron Schedule: `*/15 * * * *` (каждые 15 минут)

4. **Нажмите "Start Scraping"**

5. **Для ручного тестирования нажмите "Scrape Now"**

## Что происходит

Скрейпер автоматически:
- ✅ Находит число **51,527** (количество watchers)
- ✅ Извлекает текущую цену акции (например, $9.08)
- ✅ Сохраняет данные в SQLite базу
- ✅ Показывает результат в интерфейсе

## Просмотр данных

1. Перейдите на вкладку **"Scraped Data"**
2. Выберите символ **CLSK** в фильтре
3. Увидите записи типа:
   ```
   Content: "Watchers: 51,527, Price: $9.08"
   Author: "StockTwits"
   ```

## Настройка других символов

Для других символов акций используйте:
- Symbol: `AAPL`, `TSLA`, `NVDA` и т.д.
- CSS Selector: `watchers` (для получения количества watchers)
- Или используйте собственные селекторы для постов

## API для получения данных

```bash
# Получить все данные по CLSK
curl "http://localhost:3000/api/data/CLSK"

# Ручной запуск скрейпинга
curl -X POST "http://localhost:3000/api/scrape/manual/CLSK"
```

## Структура данных

Каждая запись содержит:
- `symbol`: "CLSK"
- `content`: "Watchers: 51,527, Price: $9.08"
- `author`: "StockTwits"
- `metadata`: JSON с детальными данными
- `scraped_at`: Время получения данных

## Расписание

Примеры cron расписаний:
- `*/15 * * * *` - каждые 15 минут
- `0 9-17 * * 1-5` - каждый час в рабочее время
- `*/5 * * * *` - каждые 5 минут (для частого мониторинга)

## Логи

Проверяйте вкладку **"Logs"** для мониторинга:
- ✅ `SUCCESS: Scraped data - Watchers: 51,527, Price: $9.08, Posts: 0`
- ❌ `ERROR: Timeout waiting for selector`

## Расширенное использование

### Для программистов

Используйте API напрямую:

```javascript
// Получить последние данные по CLSK
fetch('/api/data/CLSK?limit=1')
  .then(r => r.json())
  .then(data => {
    const latest = data[0];
    const metadata = JSON.parse(latest.metadata);
    console.log('Watchers:', metadata.watchers); // "51,527"
    console.log('Price:', metadata.price);       // "$9.08"
  });
```

### Пример автоматизации

```bash
#!/bin/bash
# Скрипт для получения watchers через API
curl -s "http://localhost:3000/api/data/CLSK?limit=1" | \
  jq -r '.[0].metadata | fromjson | .watchers'
# Выведет: 51,527
```

## Troubleshooting

**Если число не извлекается:**
1. Проверьте, что сайт StockTwits доступен
2. Убедитесь, что используете селектор `watchers`
3. Попробуйте ручной запуск через "Scrape Now"
4. Проверьте логи на наличие ошибок

**Если число изменилось:**
- Скрейпер автоматически адаптируется к изменениям структуры StockTwits
- Использует несколько стратегий поиска числа watchers

## Важные замечания

- ⚠️ Соблюдайте разумные интервалы скрейпинга (не менее 5 минут)
- ⚠️ StockTwits может изменить структуру сайта
- ⚠️ Число watchers может изменяться в реальном времени
- ✅ Все данные сохраняются локально в SQLite
- ✅ Скрейпер работает в фоновом режиме